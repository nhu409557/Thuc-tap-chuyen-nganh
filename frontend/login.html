<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Đăng nhập</title>
  <link rel="stylesheet" href="assets/css/reset.css" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="assets/css/app.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body class="bg-gray-50 flex flex-col min-h-screen">

  <div id="site-header" class="sticky top-0 z-50"></div>

  <main class="flex-1 flex items-center justify-center px-4 py-8 md:py-12 w-full">
    <div class="w-full max-w-md">
      <div class="bg-white rounded-xl border border-gray-200 p-6 md:p-8 shadow-sm">
        <h1 class="text-2xl md:text-3xl font-bold mb-2 text-gray-800">Đăng nhập</h1>
        <p class="text-gray-500 mb-6 text-sm md:text-base">Truy cập tài khoản của bạn tại TechHub</p>
        
        <form id="login-form" class="space-y-4">
          <div>
            <label class="block text-sm font-bold text-gray-700 mb-1.5">Email</label>
            <input 
              type="email" 
              name="email"
              placeholder="your@email.com" 
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base" 
              required
            />
          </div>
          
          <div>
            <label class="block text-sm font-bold text-gray-700 mb-1.5">Mật khẩu</label>
            <div class="relative">
              <input 
                id="password-input"
                type="password" 
                name="password"
                placeholder="••••••••" 
                class="w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base" 
                required
              />
              <button
                type="button"
                id="toggle-password"
                class="absolute inset-y-0 right-0 flex items-center px-4 text-gray-400 hover:text-gray-700 select-none"
                aria-label="Hiện/ẩn mật khẩu"
              >
                <span id="toggle-password-text" class="text-xs font-semibold uppercase">Hiện</span>
              </button>
            </div>
          </div>
          
          <div class="flex items-center justify-between text-sm pt-1">
            <label class="flex items-center gap-2 cursor-pointer p-1 -ml-1">
              <input id="remember-me" type="checkbox" class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"/>
              <span class="text-gray-600">Nhớ tôi</span>
            </label>
            <a class="text-blue-600 font-medium hover:underline p-1 -mr-1" href="forgot-password.html">Quên mật khẩu?</a>
          </div>
          
          <button 
            type="submit" 
            class="w-full bg-blue-600 text-white py-3.5 rounded-lg font-bold hover:bg-blue-700 active:scale-[0.98] disabled:opacity-50 transition-all shadow-md shadow-blue-500/30 text-sm md:text-base"
          >
            Đăng nhập
          </button>
        </form>

        <div class="my-6 flex items-center">
            <div class="flex-grow border-t border-gray-200"></div>
            <span class="flex-shrink-0 mx-4 text-gray-400 text-xs font-bold uppercase tracking-wider">Hoặc</span>
            <div class="flex-grow border-t border-gray-200"></div>
        </div>

        <div class="flex justify-center w-full">
            <div id="g_id_onload"
                 data-client_id="337289852002-lohtfrg4kcjnnfkjpbfgjear16615s55.apps.googleusercontent.com"
                 data-callback="handleGoogleCredentialResponse"
                 data-auto_prompt="false">
            </div>
            <div class="g_id_signin"
                 data-type="standard"
                 data-size="large"
                 data-theme="outline"
                 data-text="sign_in_with"
                 data-shape="rectangular"
                 data-logo_alignment="left"
                 data-width="350">
            </div>
        </div>

        <div class="mt-8 text-center text-sm border-t border-gray-100 pt-6">
          <span class="text-gray-500">Chưa có tài khoản? </span>
          <a class="text-blue-600 font-bold hover:underline p-2" href="register.html">Đăng ký ngay</a>
        </div>
      </div>
    </div>
  </main>
  <div id="site-footer"></div>
  <script type="module" src="assets/js/header.js"></script>
  <script type="module" src="assets/js/main.js"></script>
  <script type="module" src="assets/js/auth.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const passwordInput = document.getElementById('password-input');
      const toggleBtn = document.getElementById('toggle-password');
      const toggleText = document.getElementById('toggle-password-text');

      if (passwordInput && toggleBtn && toggleText) {
        toggleBtn.addEventListener('click', function () {
          const isHidden = passwordInput.type === 'password';
          passwordInput.type = isHidden ? 'text' : 'password';
          toggleText.textContent = isHidden ? 'Ẩn' : 'Hiện';
        });
      }

      const loginForm = document.getElementById('login-form');
      const emailInput = loginForm ? loginForm.querySelector('input[name="email"]') : null;
      const rememberCheckbox = document.getElementById('remember-me');
      const STORAGE_KEY = 'techhub_login_email';

      if (emailInput) {
        const savedEmail = localStorage.getItem(STORAGE_KEY);
        if (savedEmail) {
          emailInput.value = savedEmail;
          if (rememberCheckbox) rememberCheckbox.checked = true;
        }
      }

      if (loginForm && emailInput && rememberCheckbox) {
        loginForm.addEventListener('submit', function () {
          const email = emailInput.value.trim();
          if (rememberCheckbox.checked && email) {
            localStorage.setItem(STORAGE_KEY, email);
          } else {
            localStorage.removeItem(STORAGE_KEY);
          }
        });
      }
    });
  </script>
</body>
</html>